(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"Ql+H":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingApp",function(){return pt}),n.d(e,"SettingModule",function(){return gt});var i=n("quSY"),c=n("PCNd"),o=n("nd0x"),a=n("fXoL"),s=n("L7HW"),r=n("aX2Z"),l=n("CFL1"),p=n("4n3s"),g=n("aYRI"),u=n("E2f4"),b=n("ofXK"),f=n("Pt4E"),d=n("AO/J");function m(t,e){1&t&&(a.Vb(0,"span",13),a.zc(1,"\u5f53\u524d\u767b\u5f55"),a.Ub())}function h(t,e){if(1&t){const t=a.Wb();a.Vb(0,"button",14),a.cc("click",function(){a.sc(t);const e=a.ec().$implicit;return a.ec(2).randomInfo(e)}),a.zc(1,"\u968f\u673a\u6362\u4e2a\u7528\u6237\u540d\u548c\u5934\u50cf"),a.Ub()}}function C(t,e){if(1&t){const t=a.Wb();a.Vb(0,"button",14),a.cc("click",function(){return a.sc(t),a.ec(3).logoutConfirm()}),a.zc(1,"\u9000\u51fa\u767b\u5f55"),a.Ub()}}function w(t,e){if(1&t){const t=a.Wb();a.Vb(0,"div",3),a.Qb(1,"img",4),a.Qb(2,"e-image",5),a.Vb(3,"div",6),a.Vb(4,"div",7),a.zc(5),a.xc(6,m,2,0,"span",8),a.Ub(),a.Vb(7,"div",9),a.zc(8),a.Ub(),a.Vb(9,"div",10),a.xc(10,h,2,0,"button",11),a.xc(11,C,2,0,"button",11),a.Vb(12,"button",12),a.cc("click",function(){a.sc(t);const n=e.$implicit;return a.ec(2).deleteUser(n)}),a.zc(13,"\u5220\u9664\u7528\u6237"),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){const t=e.$implicit;a.Cb(1),a.kc("src",t.header,a.uc),a.Cb(1),a.kc("src",t.header),a.Cb(3),a.Bc("\u7528\u6237\u540d\uff1a",t.name,""),a.Cb(1),a.kc("ngIf",t.current),a.Cb(2),a.Bc("\u8d26\u53f7\uff1a",t.account,""),a.Cb(2),a.kc("ngIf",t.current),a.Cb(1),a.kc("ngIf",t.current)}}function O(t,e){if(1&t&&(a.Vb(0,"div",1),a.xc(1,w,14,7,"div",2),a.Ub()),2&t){const t=a.ec();a.Cb(1),a.kc("ngForOf",t.userList)}}let v=(()=>{class t{constructor(t,e,n,i,c,o){this.configSrv=t,this.mockPostSrv=e,this.userSrv=n,this.modalSrv=i,this.toastSrv=c,this.storageSrv=o}ngOnInit(){this.queryUserList()}queryUserList(){this.mockPostSrv.post({url:this.configSrv.api.queryUserList}).subscribe(t=>{200==t.status&&(t.data.map(t=>{t.current=t.account==this.userSrv.userInfo.account}),this.userList=t.data)})}randomInfo(t){this.mockPostSrv.post({url:this.configSrv.api.randomHeaderAndName}).subscribe(e=>{200==e.status&&this.mockPostSrv.post({url:this.configSrv.api.updateUserInfo,param:{id:t.id,name:e.data.name,header:e.data.header}}).subscribe(t=>{200==t.status?(this.queryUserList(),this.userSrv.set(t.data),this.toastSrv.success("\u66f4\u65b0\u7528\u6237\u8d44\u6599\u6210\u529f")):this.toastSrv.error(t.msg)})})}deleteUser(t){this.modalSrv.confirm({title:"\u786e\u8ba4\u5220\u9664\u6b64\u7528\u6237\uff1f",content:"\u6b64\u64cd\u4f5c\u4e0d\u80fd\u64a4\u9500\uff0c\u6240\u6709\u5173\u4e8e\u672c\u7528\u6237\u7684\u8bbe\u7f6e\u90fd\u5c06\u4ece\u672c\u673a\u7f13\u5b58\u4e2d\u6e05\u9664",confirmAction:()=>{this.mockPostSrv.post({url:this.configSrv.api.deleteUser,param:{id:t.id}}).subscribe(e=>{200==e.status?(this.toastSrv.success("\u5220\u9664\u6210\u529f"),t.id==this.userSrv.userInfo.id?this.logout():this.queryUserList()):this.toastSrv.error(e.msg)})}})}logoutConfirm(){this.modalSrv.confirm({title:"\u786e\u5b9a\u9000\u51fa\u767b\u5f55\u5417\uff1f",confirmAction:()=>{this.logout()}})}logout(){this.storageSrv.clearToken()}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(s.a),a.Pb(r.a),a.Pb(l.a),a.Pb(p.a),a.Pb(g.a),a.Pb(u.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["account-setting"]],decls:1,vars:1,consts:[["class","account-setting",4,"ngIf"],[1,"account-setting"],["class","user-item",4,"ngFor","ngForOf"],[1,"user-item"],[1,"bg",3,"src"],["shape","circle",1,"header",3,"src"],[1,"info-block"],[1,"name","mb-sm"],["class","tag ml-sm",4,"ngIf"],[1,"account"],[1,"button-block","flex-row","mt-md"],["class","mr-sm mb-sm","e-button","",3,"click",4,"ngIf"],["e-button","","eColor","danger",3,"click"],[1,"tag","ml-sm"],["e-button","",1,"mr-sm","mb-sm",3,"click"]],template:function(t,e){1&t&&a.xc(0,O,2,1,"div",0),2&t&&a.kc("ngIf",e.userList)},directives:[b.j,b.i,f.a,d.a],styles:['.account-setting[_ngcontent-%COMP%]{padding:64px 16px 32px}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{position:relative;padding:48px 16px 16px;border-radius:6px;box-shadow:0 2px 4px -2px #0000001f,0 2px 8px 0 #00000014;border:1px solid #00000014;background-color:#fff}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{position:absolute;width:200px;height:100%;right:0;top:0;z-index:0;opacity:.2;object-fit:cover;border-radius:0 4px 4px 0}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:before{content:"";position:absolute;width:80px;height:100%;right:calc(200px - 80px);top:0;z-index:1;background:linear-gradient(90deg,#fff,#fff0)}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:64px}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:absolute;top:0;left:16px;transform:translateY(-50%)}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]{position:relative;z-index:2}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px;padding:4px 8px;background-color:#00875a;border-radius:4px}.account-setting[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]{flex-wrap:wrap}']}),t})();var k=n("rkef"),x=n("xuve");let P=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["time-setting"]],decls:2,vars:0,consts:[["inSetting",""]],template:function(t,e){1&t&&(a.Qb(0,"e-calendar"),a.Qb(1,"e-time",0))},directives:[k.a,x.a],encapsulation:2}),t})();var S=n("AytR"),y=n("HNPq");const M=["inputFile"],_=["*"];let I=(()=>{class t{constructor(){this.change=new a.n}ngOnInit(){}clearValue(){this.inputFile.nativeElement.value=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["e-uploader"]],viewQuery:function(t,e){if(1&t&&a.Dc(M,1),2&t){let t;a.pc(t=a.dc())&&(e.inputFile=t.first)}},inputs:{multiple:"multiple"},outputs:{change:"change"},ngContentSelectors:_,decls:4,vars:1,consts:[[1,"e-uploader"],["type","file",1,"file-input","full-parent",3,"multiple","click"],["inputFile",""]],template:function(t,e){1&t&&(a.jc(),a.Vb(0,"label",0),a.Vb(1,"input",1,2),a.cc("click",function(){return e.clearValue()}),a.Ub(),a.ic(3),a.Ub()),2&t&&(a.Cb(1),a.kc("multiple",null!=!!e.multiple))},styles:[".e-uploader[_ngcontent-%COMP%]{position:relative;display:inline-block}.e-uploader[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;cursor:default}"]}),t})();const U=["waterFall"];function j(t,e){1&t&&a.Rb(0)}const A=function(t){return{"margin-bottom":t}},V=function(t){return{$implicit:t}};function B(t,e){if(1&t&&(a.Vb(0,"div",5),a.xc(1,j,1,0,"ng-container",6),a.Ub()),2&t){const t=e.$implicit,n=a.ec(2);a.kc("ngStyle",a.mc(3,A,n.gap)),a.Cb(1),a.kc("ngTemplateOutlet",n.reference)("ngTemplateOutletContext",a.mc(5,V,t))}}function z(t,e){if(1&t&&(a.Vb(0,"div",3),a.xc(1,B,2,7,"div",4),a.Ub()),2&t){const t=e.$implicit;a.Cb(1),a.kc("ngForOf",t)}}const F=function(t){return{gap:t}};let L=(()=>{class t{constructor(){}ngOnInit(){}ngOnChanges(){this.refresh()}refresh(){if(this.columnCount){this.waterfallData=[];for(let t=0;t<this.columnCount;t++)this.waterfallData.push([]);this.pushItemToColumn(0)}}pushItemToColumn(t){Object(o.d)(()=>{const e=[...this.waterFall.nativeElement.children];let n=0,i=0;e.map((t,e)=>{const{height:c}=t.getBoundingClientRect();0==e?i=c:c<i&&(n=e,i=c)}),this.waterfallData[n].push(this.list[t]),t!=this.list.length-1&&this.pushItemToColumn(t+1)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["e-waterfall"]],viewQuery:function(t,e){if(1&t&&a.Dc(U,1),2&t){let t;a.pc(t=a.dc())&&(e.waterFall=t.first)}},inputs:{list:"list",columnCount:"columnCount",reference:"reference",gap:"gap"},features:[a.Ab],decls:3,vars:4,consts:[[1,"e-waterfall","flex-row","align-start",3,"ngStyle"],["waterFall",""],["class","e-waterfall-column",4,"ngFor","ngForOf"],[1,"e-waterfall-column"],["class","e-waterfall-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"e-waterfall-item",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(a.Vb(0,"div",0,1),a.xc(2,z,2,1,"div",2),a.Ub()),2&t&&(a.kc("ngStyle",a.mc(2,F,e.gap)),a.Cb(2),a.kc("ngForOf",e.waterfallData))},directives:[b.k,b.i,b.n],styles:[".e-waterfall[_ngcontent-%COMP%]   .e-waterfall-column[_ngcontent-%COMP%]{flex:1}"]}),t})(),W=(()=>{class t{transform(t,...e){return t.replace("/wallpaper/","/wallpaper/thumbnail/")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Ob({name:"thumbnail",type:t,pure:!0}),t})();const Q=["waterFall"],T=["loadImgRef"];function D(t,e){if(1&t){const t=a.Wb();a.Vb(0,"img",9,10),a.cc("load",function(e){return a.sc(t),a.ec().onLoadImgComplete(e)})("error",function(e){return a.sc(t),a.ec().onLoadImgError(e)}),a.Ub()}if(2&t){const t=a.ec();a.kc("src",t.loadImg.url,a.uc)}}function E(t,e){if(1&t){const t=a.Wb();a.Vb(0,"div",11),a.cc("click",function(){a.sc(t);const n=e.$implicit,i=a.ec();return i.currentWallpaper==n.url?"":i.setWallpaper(n)}),a.Qb(1,"img",12),a.fc(2,"thumbnail"),a.Ub()}if(2&t){const t=e.$implicit,n=a.ec();a.kc("ngClass",n.currentWallpaper==t.url?"active":""),a.Cb(1),a.kc("src",a.gc(2,2,t.url),a.uc)}}const K=function(t){return{loading:t}};let $=(()=>{class t{constructor(t,e,n,i){this.wallpaperSrv=t,this.mockPostSrv=e,this.configSrv=n,this.toastSrv=i}ngOnInit(){this.getWallpaper()}getWallpaper(){this.mockPostSrv.post({url:this.configSrv.api.getWallpaper}).subscribe(t=>{200==t.status&&(S.a.production&&t.data.splice(0,1),this.wallpaperList=t.data,this.wallpaperSrv.getWallpaper().subscribe(t=>{this.currentWallpaper=t}))})}setWallpaper(t){this.loading=!0,this.loadImg=Object(o.c)(t)}onLoadImgComplete(){this.wallpaperSrv.setWallpaper(this.loadImg.url,Boolean(2==this.loadImg.type)),this.toastSrv.success("\u8bbe\u7f6e\u58c1\u7eb8\u6210\u529f",{content:2==this.loadImg.type?"\u672c\u5730\u4e0a\u4f20\u7684\u58c1\u7eb8\u5237\u65b0\u9875\u9762\u540e\u5c06\u4e22\u5931":""}),this.loadImg=null,this.loading=!1}onLoadImgError(t){this.loadImg=null,this.loading=!1,this.toastSrv.error("\u8bbe\u7f6e\u58c1\u7eb8\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc")}onFileSelect(t){[...t.target.files].map((t,e)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>{const t={id:Object(o.g)(),type:2,url:String(n.result)};this.wallpaperList.push(t),this.waterFall.refresh(),0==e&&this.setWallpaper(t)}})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(y.a),a.Pb(r.a),a.Pb(s.a),a.Pb(g.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["wallpaper-setting"]],viewQuery:function(t,e){if(1&t&&(a.Dc(Q,1),a.Dc(T,1)),2&t){let t;a.pc(t=a.dc())&&(e.waterFall=t.first),a.pc(t=a.dc())&&(e.loadImgRef=t.first)}},decls:11,vars:7,consts:[[1,"wallpaper-setting","full-parent",3,"ngClass"],[1,"wallpaper-setting-wrapper","full-parent-scroll","px-md","py-lg"],["class","load-image",3,"src","load","error",4,"ngIf"],[3,"change"],["e-button",""],[1,"wallpaper-select","mt-md"],["gap","16px",3,"list","columnCount","reference"],["waterFall",""],["reference",""],[1,"load-image",3,"src","load","error"],["loadImgRef",""],[1,"wallpaper-item",3,"ngClass","click"],[1,"bg",3,"src"]],template:function(t,e){if(1&t&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.xc(2,D,2,1,"img",2),a.Vb(3,"e-uploader",3),a.cc("change",function(t){return e.onFileSelect(t)}),a.Vb(4,"button",4),a.zc(5,"\u9009\u62e9\u672c\u5730\u58c1\u7eb8"),a.Ub(),a.Ub(),a.Vb(6,"div",5),a.Vb(7,"e-waterfall",6,7),a.xc(9,E,3,4,"ng-template",null,8,a.yc),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t){const t=a.qc(10);a.kc("ngClass",a.mc(5,K,e.loading)),a.Cb(2),a.kc("ngIf",e.loadImg),a.Cb(5),a.kc("list",e.wallpaperList)("columnCount",2)("reference",t)}},directives:[b.h,b.j,I,d.a,L],pipes:[W],styles:['@charset "UTF-8";.wallpaper-setting[_ngcontent-%COMP%]{position:relative}.wallpaper-setting[_ngcontent-%COMP%]:before{content:"\u8bbe\u7f6e\u58c1\u7eb8\u4e2d...";font-size:18px;font-weight:700;position:fixed;left:50%;top:50%;z-index:1;opacity:0;pointer-events:none;transform:translate(-50%,-50%);transition:opacity .3s ease}.wallpaper-setting.loading[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]{opacity:.1;pointer-events:none}.wallpaper-setting.loading[_ngcontent-%COMP%]:before{opacity:1}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]{background-color:#2f2f2f;transition:opacity .3s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]{position:relative}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{width:100%;border-radius:2px;border:8px solid #fff;transition:transform .2s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:hover   .bg[_ngcontent-%COMP%]{transform:scale(1.02)}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:active   .bg[_ngcontent-%COMP%]{transform:scale(.98)}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item.active[_ngcontent-%COMP%]:before{content:"\u5f53\u524d\u58c1\u7eb8";position:absolute;left:16px;bottom:16px;background-color:#0052cc;border-radius:2px;color:#fff;z-index:1;padding:4px;font-size:12px}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .load-image[_ngcontent-%COMP%]{width:1px;height:1px;visibility:hidden;position:absolute;z-index:-1;pointer-events:none;left:0}']}),t})();var J=n("R0Ic");const R={opacity:0,transform:"translateX(100%)"},q="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",N={slideAnim:Object(J.m)("slideAnim",[Object(J.l)(":enter",[Object(J.k)(R),Object(J.e)(q,Object(J.k)({opacity:1,transform:"translateX(0)"}))]),Object(J.l)(":leave",[Object(J.e)(q,Object(J.k)(R))])]),backStageAnim:Object(J.m)("backStageAnim",[Object(J.j)("default",Object(J.k)({})),Object(J.j)("backStage",Object(J.k)({transform:"scale(0.95)"})),Object(J.l)("default <=> backStage",[Object(J.e)("0.4s cubic-bezier(0.4, 0.0, 0.2, 1)")])])};var X=n("YLzM"),H=n("D8zh");const Y={opacity:0},Z="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",G={fadeAnim:Object(J.m)("fadeAnim",[Object(J.l)(":enter",[Object(J.k)(Y),Object(J.e)(Z,Object(J.k)({opacity:1}))]),Object(J.l)(":leave",[Object(J.e)(Z,Object(J.k)(Y))])])};function tt(t,e){if(1&t&&a.Qb(0,"div",1),2&t){const t=a.ec();a.kc("@fadeAnim",void 0)("ngStyle",t.shadeStyle)}}let et=(()=>{class t{constructor(){}get shadeStyle(){return{"z-index":Object(o.o)(this.zIndex)?this.zIndex:"unset","background-color":`rgba(0,0,0,${Object(o.o)(this.opacity)?this.opacity:"0.6"})`}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["e-shade"]],inputs:{show:"show",zIndex:"zIndex",opacity:"opacity"},decls:1,vars:1,consts:[["class","e-shade full-parent",3,"ngStyle",4,"ngIf"],[1,"e-shade","full-parent",3,"ngStyle"]],template:function(t,e){1&t&&a.xc(0,tt,1,2,"div",0),2&t&&a.kc("ngIf",e.show)},directives:[b.j,b.k],styles:[".e-shade[_ngcontent-%COMP%] {\n      position:absolute;\n      left:0;\n      top:0;\n      pointer-events:none;\n    }"],data:{animation:[G.fadeAnim]}}),t})();var nt=n("7NfB");const it=["eApp"];function ct(t,e){if(1&t){const t=a.Wb();a.Vb(0,"div",11),a.cc("click",function(){a.sc(t);const n=e.$implicit;return a.ec().onSettingClick(n)}),a.Qb(1,"i",12),a.Vb(2,"div",13),a.zc(3),a.Ub(),a.Ub()}if(2&t){const t=e.$implicit;a.Cb(1),a.kc("icon",t.icon),a.Cb(2),a.Ac(t.name)}}function ot(t,e){1&t&&a.Qb(0,"account-setting")}function at(t,e){1&t&&a.Qb(0,"time-setting")}function st(t,e){1&t&&a.Qb(0,"wallpaper-setting")}function rt(t,e){if(1&t&&(a.Vb(0,"div",14),a.xc(1,ot,1,0,"account-setting",15),a.xc(2,at,1,0,"time-setting",15),a.xc(3,st,1,0,"wallpaper-setting",15),a.Ub()),2&t){const t=a.ec();a.kc("@slideAnim",void 0)("ngSwitch",t.activeSettingKey),a.Cb(1),a.kc("ngSwitchCase","account"),a.Cb(1),a.kc("ngSwitchCase","time"),a.Cb(1),a.kc("ngSwitchCase","wallpaper")}}const lt=function(t){return{value:t}};let pt=(()=>{class t{constructor(t,e){this.EAS=t,this.userSrv=e,this.menu=[{name:"\u6240\u6709\u8bbe\u7f6e",children:[]},{name:"\u5173\u4e8e",children:[{name:"\u65e7\u7ad9-\u4f5c\u54c1\u96c6",click:()=>{this.EAS.launch("oldSite")}},{name:"\u5173\u4e8eEthanDesktop",click:()=>{this.EAS.launch("ethanDesktopIntroduction")}}]}],this.subscription=new i.a,this.settings=[{key:"account",name:"\u8d26\u53f7\u7ba1\u7406",icon:"account_circle"},{key:"time",name:"\u65f6\u95f4\u8bbe\u7f6e",icon:"schedule"},{key:"wallpaper",name:"\u684c\u9762\u58c1\u7eb8",icon:"image"}],this.titleBarConfig={showBack:!1,showBorder:!1,backClick:()=>this.onBackClick()},this.EAS.setAppActionBarMenu("setting",this.menu),this.settings.map(t=>{this.menu[0].children.push({name:t.name,click:()=>{this.onSettingClick(t)}})})}ngOnInit(){}ngAfterViewInit(){this.subscription.add(this.EAS.eAppConfigChange.subscribe(t=>{var e;"setting"==t.id&&(null===(e=t.config)||void 0===e?void 0:e.activeSettingKey)&&this.onSettingClick({key:t.config.activeSettingKey})}))}ngOnDestroy(){this.subscription.unsubscribe()}onSettingClick(t){Object(o.d)(()=>{this.activeSettingKey=t.key,this.titleBarConfig.showBack=!0,this.changeTitleBarTheme("wallpaper"==t.key?"dark":"light"),this.eApp.refreshTitleBarConfig()})}onBackClick(){this.activeSettingKey=null,this.titleBarConfig.showBack=!1,this.changeTitleBarTheme("light"),this.eApp.refreshTitleBarConfig()}changeTitleBarTheme(t){"dark"==t?(this.titleBarConfig.background="#444444",this.titleBarConfig.showBorder=!1,this.titleBarConfig.color="white"):(this.titleBarConfig.background="white",this.titleBarConfig.showBorder=!0,delete this.titleBarConfig.color)}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(X.a),a.Pb(l.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Dc(it,1),2&t){let t;a.pc(t=a.dc())&&(e.eApp=t.first)}},inputs:{activeSettingKey:"activeSettingKey"},decls:14,vars:10,consts:[[3,"titleBarConfig","titleBarConfigChange"],["eApp",""],[1,"setting","full-parent"],[1,"user-block","flex-column","align-center","justify-center","pt-md","mb-md"],["size","large","shape","circle",1,"mb-md",3,"src"],[1,"user-name"],[1,"user-account"],[1,"setting-block","p-md"],["class","setting-item flex-row align-center px-lg py-md mb-md",3,"click",4,"ngFor","ngForOf"],["opacity","0.5",3,"show"],["class","setting-panel full-parent-scroll",3,"ngSwitch",4,"ngIf"],[1,"setting-item","flex-row","align-center","px-lg","py-md","mb-md",3,"click"],["e-icon","","type","filled","size","medium",1,"icon","mr-md",3,"icon"],[1,"name"],[1,"setting-panel","full-parent-scroll",3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(a.Vb(0,"e-app",0,1),a.cc("titleBarConfigChange",function(t){return e.titleBarConfig=t}),a.Vb(2,"div",2),a.Vb(3,"div",3),a.Qb(4,"e-image",4),a.Vb(5,"b",5),a.Vb(6,"h3"),a.zc(7),a.Ub(),a.Ub(),a.Vb(8,"div",6),a.zc(9),a.Ub(),a.Ub(),a.Vb(10,"div",7),a.xc(11,ct,4,2,"div",8),a.Ub(),a.Ub(),a.Qb(12,"e-shade",9),a.xc(13,rt,4,5,"div",10),a.Ub()),2&t&&(a.kc("titleBarConfig",e.titleBarConfig),a.Cb(2),a.kc("@backStageAnim",a.mc(8,lt,e.activeSettingKey?"backStage":"default")),a.Cb(2),a.kc("src",e.userSrv.userInfo.header),a.Cb(3),a.Ac(e.userSrv.userInfo.name),a.Cb(2),a.Ac(e.userSrv.userInfo.account),a.Cb(2),a.kc("ngForOf",e.settings),a.Cb(1),a.kc("show",!!e.activeSettingKey),a.Cb(1),a.kc("ngIf",e.activeSettingKey))},directives:function(){return[H.a,f.a,b.i,et,b.j,nt.a,b.l,b.m,v,P,$]},styles:[".user-block[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin-bottom:4px}.user-block[_ngcontent-%COMP%]   .user-account[_ngcontent-%COMP%]{opacity:.6}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #00000014;box-shadow:0 0 2px -2px #0000001a,0 2px 4px 0 #0000000f;background-color:#fff;transition:box-shadow .2s ease,background-color .2s ease}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#42526e}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px -2px #0000001f,0 2px 8px 0 #00000014}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:active{background-color:#f9f9f9;box-shadow:none}.setting-panel[_ngcontent-%COMP%]{position:absolute;left:0;top:0;background-color:#fff;box-shadow:-6px 0 16px -8px #00000014,-9px 0 28px 0 #0000000d,-12px 0 48px 16px #00000008}"],data:{animation:[N.slideAnim,N.backStageAnim]}}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({imports:[[c.a]]}),t})()}}]);