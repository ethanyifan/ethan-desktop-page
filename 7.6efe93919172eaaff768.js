(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"Ql+H":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingApp",function(){return D}),n.d(e,"SettingModule",function(){return R});var i=n("b3xY"),c=n("PCNd"),l=n("nd0x"),a=n("fXoL"),o=n("HNPq"),s=n("aX2Z"),r=n("L7HW"),p=n("aYRI");const u=["inputFile"],g=["*"];let f=(()=>{class t{constructor(){this.change=new a.n}ngOnInit(){}clearValue(){this.inputFile.nativeElement.value=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["e-uploader"]],viewQuery:function(t,e){if(1&t&&a.Bc(u,1),2&t){let t;a.oc(t=a.dc())&&(e.inputFile=t.first)}},inputs:{multiple:"multiple"},outputs:{change:"change"},ngContentSelectors:g,decls:4,vars:1,consts:[[1,"e-uploader"],["type","file",1,"file-input","full-parent",3,"multiple","click"],["inputFile",""]],template:function(t,e){1&t&&(a.ic(),a.Vb(0,"label",0),a.Vb(1,"input",1,2),a.cc("click",function(){return e.clearValue()}),a.Ub(),a.hc(3),a.Ub()),2&t&&(a.Cb(1),a.jc("multiple",null!=!!e.multiple))},styles:[".e-uploader[_ngcontent-%COMP%]{position:relative;display:inline-block}.e-uploader[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;cursor:default}"]}),t})();var b=n("AO/J"),d=n("ofXK");const m=["waterFall"];function h(t,e){1&t&&a.Rb(0)}const w=function(t){return{"margin-bottom":t}},C=function(t){return{$implicit:t}};function O(t,e){if(1&t&&(a.Vb(0,"div",5),a.wc(1,h,1,0,"ng-container",6),a.Ub()),2&t){const t=e.$implicit,n=a.ec(2);a.jc("ngStyle",a.lc(3,w,n.gap)),a.Cb(1),a.jc("ngTemplateOutlet",n.reference)("ngTemplateOutletContext",a.lc(5,C,t))}}function v(t,e){if(1&t&&(a.Vb(0,"div",3),a.wc(1,O,2,7,"div",4),a.Ub()),2&t){const t=e.$implicit;a.Cb(1),a.jc("ngForOf",t)}}const k=function(t){return{gap:t}};let y=(()=>{class t{constructor(){}ngOnInit(){}ngOnChanges(){this.refresh()}refresh(){if(this.columnCount){this.waterfallData=[];for(let t=0;t<this.columnCount;t++)this.waterfallData.push([]);this.pushItemToColumn(0)}}pushItemToColumn(t){Object(l.d)(()=>{const e=[...this.waterFall.nativeElement.children];let n=0,i=0;e.map((t,e)=>{const{height:c}=t.getBoundingClientRect();0==e?i=c:c<i&&(n=e,i=c)}),this.waterfallData[n].push(this.list[t]),t!=this.list.length-1&&this.pushItemToColumn(t+1)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["e-waterfall"]],viewQuery:function(t,e){if(1&t&&a.Bc(m,1),2&t){let t;a.oc(t=a.dc())&&(e.waterFall=t.first)}},inputs:{list:"list",columnCount:"columnCount",reference:"reference",gap:"gap"},features:[a.Ab],decls:3,vars:4,consts:[[1,"e-waterfall","flex-row","align-start",3,"ngStyle"],["waterFall",""],["class","e-waterfall-column",4,"ngFor","ngForOf"],[1,"e-waterfall-column"],["class","e-waterfall-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"e-waterfall-item",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(a.Vb(0,"div",0,1),a.wc(2,v,2,1,"div",2),a.Ub()),2&t&&(a.jc("ngStyle",a.lc(2,k,e.gap)),a.Cb(2),a.jc("ngForOf",e.waterfallData))},directives:[d.k,d.i,d.n],styles:[".e-waterfall[_ngcontent-%COMP%]   .e-waterfall-column[_ngcontent-%COMP%]{flex:1}"]}),t})();const j=["waterFall"];function S(t,e){if(1&t){const t=a.Wb();a.Vb(0,"div",7),a.cc("click",function(){a.rc(t);const n=e.$implicit;return a.ec().setWallpaper(n)}),a.Qb(1,"img",8),a.Vb(2,"div",9),a.yc(3),a.Ub(),a.Ub()}if(2&t){const t=e.$implicit;a.Cb(1),a.jc("src",t.url,a.tc),a.Cb(2),a.zc(t.name)}}let x=(()=>{class t{constructor(t,e,n,i){this.wallpaperSrv=t,this.mockPostSrv=e,this.configSrv=n,this.toastSrv=i}ngOnInit(){this.getWallpaper()}getWallpaper(){this.mockPostSrv.post({url:this.configSrv.api.getWallpaper}).subscribe(t=>{200==t.status&&(this.wallpaperList=t.data)})}setWallpaper(t){this.wallpaperSrv.setWallpaper(t.url,Boolean(2==t.type)),this.toastSrv.success("\u8bbe\u7f6e\u58c1\u7eb8\u6210\u529f",{content:2==t.type?"\u672c\u5730\u4e0a\u4f20\u7684\u58c1\u7eb8\u5237\u65b0\u9875\u9762\u540e\u5c06\u4e22\u5931":""})}onFileSelect(t){[...t.target.files].map((t,e)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>{const t={id:Object(l.e)(),type:2,url:String(n.result)};this.wallpaperList.push(t),this.waterFall.refresh(),0==e&&this.setWallpaper(t)}})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(o.a),a.Pb(s.a),a.Pb(r.a),a.Pb(p.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["wallpaper-setting"]],viewQuery:function(t,e){if(1&t&&a.Bc(j,1),2&t){let t;a.oc(t=a.dc())&&(e.waterFall=t.first)}},decls:9,vars:3,consts:[[1,"wallpaper-setting","full-parent-scroll","px-md","py-lg"],[3,"change"],["e-button",""],[1,"wallpaper-select","mt-md"],["gap","16px",3,"list","columnCount","reference"],["waterFall",""],["reference",""],[1,"wallpaper-item",3,"click"],[1,"bg",3,"src"],[1,"name"]],template:function(t,e){if(1&t&&(a.Vb(0,"div",0),a.Vb(1,"e-uploader",1),a.cc("change",function(t){return e.onFileSelect(t)}),a.Vb(2,"button",2),a.yc(3,"\u9009\u62e9\u672c\u5730\u58c1\u7eb8"),a.Ub(),a.Ub(),a.Vb(4,"div",3),a.Vb(5,"e-waterfall",4,5),a.wc(7,S,4,2,"ng-template",null,6,a.xc),a.Ub(),a.Ub(),a.Ub()),2&t){const t=a.pc(8);a.Cb(5),a.jc("list",e.wallpaperList)("columnCount",2)("reference",t)}},directives:[f,b.a,y],styles:[".wallpaper-setting[_ngcontent-%COMP%]{background-color:#2f2f2f}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]{position:relative;overflow:hidden}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{width:100%;border:8px solid #fff}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:100%;position:absolute;left:0;bottom:0;background-color:#fff;opacity:0;padding:8px;transition:opacity .3s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:hover   .name[_ngcontent-%COMP%]{opacity:1}"]}),t})();var P=n("R0Ic");const M={opacity:0,transform:"translateX(100%)"},B="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",_={slideAnim:Object(P.m)("slideAnim",[Object(P.j)("void",Object(P.k)(M)),Object(P.l)(":enter",[Object(P.e)(B,Object(P.k)({opacity:1,transform:"translateX(0)"}))]),Object(P.l)(":leave",[Object(P.e)(B,Object(P.k)(M))])]),backStageAnim:Object(P.m)("backStageAnim",[Object(P.j)("default",Object(P.k)({})),Object(P.j)("backStage",Object(P.k)({transform:"scale(0.95)"})),Object(P.l)("default <=> backStage",[Object(P.e)("0.4s cubic-bezier(0.4, 0.0, 0.2, 1)")])])};var A=n("YLzM"),F=n("EWJI"),I=n("D8zh");const V={opacity:0},U="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",z={fadeAnim:Object(P.m)("fadeAnim",[Object(P.j)("void",Object(P.k)(V)),Object(P.l)(":enter",[Object(P.e)(U,Object(P.k)({opacity:1}))]),Object(P.l)(":leave",[Object(P.e)(U,Object(P.k)(V))])])};function W(t,e){if(1&t&&a.Qb(0,"div",1),2&t){const t=a.ec();a.jc("@fadeAnim",void 0)("ngStyle",t.shadeStyle)}}let Q=(()=>{class t{constructor(){}get shadeStyle(){return{"z-index":Object(l.k)(this.zIndex)?this.zIndex:"unset","background-color":`rgba(0,0,0,${Object(l.k)(this.opacity)?this.opacity:"0.6"})`}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["e-shade"]],inputs:{show:"show",zIndex:"zIndex",opacity:"opacity"},decls:1,vars:1,consts:[["class","e-shade full-parent",3,"ngStyle",4,"ngIf"],[1,"e-shade","full-parent",3,"ngStyle"]],template:function(t,e){1&t&&a.wc(0,W,1,2,"div",0),2&t&&a.jc("ngIf",e.show)},directives:[d.j,d.k],styles:[".e-shade[_ngcontent-%COMP%] {\n      position:absolute;\n      left:0;\n      top:0;\n      pointer-events:none;\n    }"],data:{animation:[z.fadeAnim]}}),t})();const J=["eApp"];function T(t,e){if(1&t){const t=a.Wb();a.Vb(0,"div",6),a.cc("click",function(){a.rc(t);const n=e.$implicit;return a.ec().onSettingClick(n)}),a.Vb(1,"div",7),a.yc(2),a.Ub(),a.Ub()}if(2&t){const t=e.$implicit;a.Cb(2),a.zc(t.name)}}function $(t,e){1&t&&a.Qb(0,"wallpaper-setting")}function K(t,e){if(1&t&&(a.Vb(0,"div",8),a.Qb(1,"div",9),a.wc(2,$,1,0,"wallpaper-setting",10),a.Ub()),2&t){const t=a.ec();a.jc("@slideAnim",void 0)("ngSwitch",t.activeSettingKey),a.Cb(2),a.jc("ngSwitchCase","wallpaper")}}const L=function(t){return{value:t}};let D=(()=>{class t{constructor(t,e){this.EAS=t,this.SS=e,this.menu=[{name:"\u8bbe\u7f6e",items:[{name:"\u9996\u9875\u8bbe\u7f6e"},{name:"\u968f\u4fbf\u8bbe\u7f6e"}]}],this.settings=[{key:"user",name:"\u7528\u6237\u7ba1\u7406"},{key:"wallpaper",name:"\u684c\u9762\u58c1\u7eb8"}],this.titleBarConfig={showBack:!1,backClick:()=>this.onBackClick()},this.EAS.setAppActionBarMenu("setting",this.menu)}ngOnInit(){}onSettingClick(t){this.activeSettingKey=t.key,this.titleBarConfig.showBack=!0,"wallpaper"==t.key&&(this.titleBarConfig.background="#444444",this.titleBarConfig.showBorder=!1,this.titleBarConfig.color="white"),this.eApp.refreshTitleBarConfig()}onBackClick(){this.activeSettingKey=null,this.titleBarConfig.showBack=!1,this.titleBarConfig.background="white",this.titleBarConfig.showBorder=!0,delete this.titleBarConfig.color,this.eApp.refreshTitleBarConfig()}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(A.a),a.Pb(F.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Bc(J,1),2&t){let t;a.oc(t=a.dc())&&(e.eApp=t.first)}},decls:6,vars:7,consts:[[3,"titleBarConfig","titleBarConfigChange"],["eApp",""],[1,"setting-block","p-md","full-parent"],["class","setting-item px-lg py-md mb-md",3,"click",4,"ngFor","ngForOf"],["opacity","0.2",3,"show"],["class","setting-panel full-parent",3,"ngSwitch",4,"ngIf"],[1,"setting-item","px-lg","py-md","mb-md",3,"click"],[1,"name"],[1,"setting-panel","full-parent",3,"ngSwitch"],[1,"setting-panel-util","flex-row"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(a.Vb(0,"e-app",0,1),a.cc("titleBarConfigChange",function(t){return e.titleBarConfig=t}),a.Vb(2,"div",2),a.wc(3,T,3,1,"div",3),a.Ub(),a.Qb(4,"e-shade",4),a.wc(5,K,3,3,"div",5),a.Ub()),2&t&&(a.jc("titleBarConfig",e.titleBarConfig),a.Cb(2),a.jc("@backStageAnim",a.lc(5,L,e.activeSettingKey?"backStage":"default")),a.Cb(1),a.jc("ngForOf",e.settings),a.Cb(1),a.jc("show",!!e.activeSettingKey),a.Cb(1),a.jc("ngIf",e.activeSettingKey))},directives:function(){return[I.a,d.i,Q,d.j,d.l,d.m,x]},styles:[".setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #00000014;box-shadow:0 0 2px -2px #0000001a,0 2px 4px 0 #0000000f;background-color:#fff;transition:box-shadow .2s ease,background-color .2s ease}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px -2px #0000001f,0 2px 8px 0 #00000014}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:active{background-color:#f9f9f9;box-shadow:none}.setting-panel[_ngcontent-%COMP%]{position:absolute;left:0;top:0;background-color:#fff;box-shadow:-6px 0 16px -8px #00000014,-9px 0 28px 0 #0000000d,-12px 0 48px 16px #00000008}"],data:{animation:[_.slideAnim,_.backStageAnim]}}),t})(),R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({imports:[[c.a,i.a]]}),t})()}}]);