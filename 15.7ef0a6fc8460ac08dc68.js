(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{zMu1:function(n,t,e){"use strict";e.r(t),e.d(t,"RunningAppsApp",function(){return M}),e.d(t,"RunningAppsModule",function(){return S});var c=e("PCNd"),i=e("fXoL"),o=e("YLzM"),s=e("D8zh"),r=e("ofXK");const a=function(n){return{bottom:n}};function l(n,t){if(1&n&&(i.Vb(0,"div",3),i.Qb(1,"div",4),i.Ub()),2&n){const n=t.$implicit;i.kc("ngStyle",n.style),i.Cb(1),i.kc("ngStyle",i.mc(2,a,n.yValue))}}const g=function(n,t,e){return{"justify-start":n,"justify-center":t,"justify-end":e}};function b(n,t){if(1&n&&(i.Vb(0,"div",1),i.yc(1,l,2,4,"div",2),i.Ub()),2&n){const n=i.ec();i.kc("ngClass",i.oc(2,g,"start"==n.config.blockConfig.align,"center"==n.config.blockConfig.align,"end"==n.config.blockConfig.align)),i.Cb(1),i.kc("ngForOf",n.processedData)}}let f=(()=>{class n{constructor(){}ngOnInit(){}ngOnChanges(){this.processData(),this.setMaxYValue()}refresh(){this.setMaxYValue(),this.processData()}setMaxYValue(){if(this.config.blockConfig.maxYValue)return;let n=0;this.config.data.map(t=>{t.yValue>n&&(n=t.yValue)}),this.maxYValue=n}processData(){const n=this.config.blockConfig.maxYValue||this.maxYValue;let t=[];this.config.data.map(e=>{let c={height:100*e.yValue/n+"%"};t.push(Object.assign(Object.assign({},e),{style:c}))}),this.processedData=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Jb({type:n,selectors:[["e-chart-block"]],inputs:{config:"config"},features:[i.Ab],decls:1,vars:1,consts:[["class","e-chart-block full-parent flex-row align-end",3,"ngClass",4,"ngIf"],[1,"e-chart-block","full-parent","flex-row","align-end",3,"ngClass"],["class","data-item flex-column align-center",3,"ngStyle",4,"ngFor","ngForOf"],[1,"data-item","flex-column","align-center",3,"ngStyle"],[1,"dot",3,"ngStyle"]],template:function(n,t){1&n&&i.yc(0,b,2,6,"div",0),2&n&&i.kc("ngIf",t.processedData)},directives:[r.j,r.h,r.i,r.k],styles:[".e-chart-block[_ngcontent-%COMP%]{border:1px solid #0052cc;background-image:linear-gradient(90deg,#0052cc29 1px,#0000 0),linear-gradient(0,#0052cc29 1px,#0000 0);background-size:50px 50px,14px 14px;overflow:hidden}.e-chart-block.justify-center[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]{flex:1}.e-chart-block[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]{width:10px;flex-shrink:0;border-top:1px solid #0052cc;position:relative;background-color:#0052cc33}.e-chart-block[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]:first-child{border-left:1px solid #0052cc}"]}),n})();function u(n,t){if(1&n&&i.Qb(0,"e-chart-block",4,5),2&n){const n=i.ec(2);i.kc("config",n.config)}}const p=function(n,t){return{width:n,height:t}};function h(n,t){if(1&n&&(i.Vb(0,"div",1,2),i.yc(2,u,2,1,"e-chart-block",3),i.Ub()),2&n){const n=i.ec();i.kc("ngSwitch",n.config.widget)("ngStyle",i.nc(3,p,n.config.width,n.config.height)),i.Cb(2),i.kc("ngSwitchCase","block")}}let d=(()=>{class n{constructor(){this.defaultConfig={width:"100%",height:"300px",widget:"block",blockConfig:{align:"center"},data:[]}}ngOnInit(){}ngOnChanges(){this.processConfig()}refresh(){this.processConfig()}processConfig(){this.config&&(this.config=Object.assign(Object.assign({},this.defaultConfig),this.config)),this.eChartChildren&&this.eChartChildren._results.map(n=>{n.refresh()})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Jb({type:n,selectors:[["e-chart"]],viewQuery:function(n,t){if(1&n&&i.Ec(f,1),2&n){let n;i.pc(n=i.dc())&&(t.eChartChildren=n)}},inputs:{config:"config"},features:[i.Ab],decls:1,vars:1,consts:[["class","e-chart",3,"ngSwitch","ngStyle",4,"ngIf"],[1,"e-chart",3,"ngSwitch","ngStyle"],["eChart",""],[3,"config",4,"ngSwitchCase"],[3,"config"],["eChartLine",""]],template:function(n,t){1&n&&i.yc(0,h,3,6,"div",0),2&n&&i.kc("ngIf",t.config)},directives:[r.j,r.l,r.k,r.m,f],styles:[""]}),n})();var m=e("iwKZ"),C=e("AO/J"),k=e("6frP"),y=e("Pt4E");const v=["eChart"];function A(n,t){if(1&n){const n=i.Wb();i.Vb(0,"button",11),i.cc("click",function(){return i.sc(n),i.ec().EAS.closeApp()}),i.Ac(1,"\u5168\u90e8\u5173\u95ed"),i.Ub()}}function x(n,t){1&n&&i.Qb(0,"e-empty",12)}function V(n,t){if(1&n){const n=i.Wb();i.Vb(0,"div",13),i.Qb(1,"e-image",14),i.Vb(2,"div",15),i.Ac(3),i.Ub(),i.Vb(4,"button",16),i.cc("click",function(){i.sc(n);const e=t.$implicit;return i.ec().EAS.closeApp(e.id)}),i.Ac(5,"\u5173\u95ed"),i.Ub(),i.Ub()}if(2&n){const n=t.$implicit;i.Cb(1),i.kc("src",n.icon),i.Cb(2),i.Bc(n.name)}}function O(n,t){if(1&n){const n=i.Wb();i.Vb(0,"div",13),i.Qb(1,"img",18),i.Vb(2,"div",19),i.Vb(3,"div",15),i.Ac(4),i.Ub(),i.Vb(5,"div",20),i.Ac(6),i.Ub(),i.Ub(),i.Vb(7,"button",16),i.cc("click",function(){i.sc(n);const e=t.$implicit;return i.ec(2).EAS.launch(e.id)}),i.Ac(8,"\u8fd0\u884c"),i.Ub(),i.Ub()}if(2&n){const n=t.$implicit;i.Cb(1),i.kc("src",n.icon,i.vc),i.Cb(3),i.Bc(n.name),i.Cb(2),i.Cc("Key: ",n.id,"")}}function w(n,t){if(1&n&&(i.Tb(0),i.Qb(1,"e-divider"),i.Vb(2,"div",17),i.Vb(3,"div",2),i.Vb(4,"b",3),i.Vb(5,"h2"),i.Ac(6,"\u672a\u8fd0\u884c"),i.Ub(),i.Ub(),i.Ub(),i.yc(7,O,9,3,"div",9),i.Ub(),i.Sb()),2&n){const n=i.ec();i.Cb(7),i.kc("ngForOf",n.closedApps)}}let M=(()=>{class n{constructor(n){this.EAS=n,this.menu=[{name:"\u8fdb\u7a0b\u7ba1\u7406",children:[{name:"\u6700\u5c0f\u5316\u6240\u6709App",click:()=>{this.EAS.viewDesktop()}},{name:"\u5173\u95ed\u6240\u6709App",click:()=>{this.EAS.closeApp()}}]}],this.memoryChart={widget:"block",height:"112px",blockConfig:{align:"end"},data:[]},this.EAS.setAppActionBarMenu("runningApps",this.menu)}get runningApps(){return this.EAS.appsInArray.filter(n=>"closed"!=n.status&&"runningApps"!=n.id)}get closedApps(){return this.EAS.appsInArray.filter(n=>"closed"==n.status)}ngOnInit(){this.memoryRefreshInterval=setInterval(()=>{const{usedJSHeapSize:n,totalJSHeapSize:t}=window.performance.memory;this.memoryChart.blockConfig.maxYValue=this.bitToMege(t),this.memoryChart.data.push({xLabel:"",yValue:this.bitToMege(n)}),this.eChart.refresh()},1e3)}ngOnDestroy(){this.memoryRefreshInterval&&(clearInterval(this.memoryRefreshInterval),this.memoryRefreshInterval=null)}bitToMege(n){return n?Number((n/1e6).toFixed(4)):0}}return n.\u0275fac=function(t){return new(t||n)(i.Pb(o.a))},n.\u0275cmp=i.Jb({type:n,selectors:[["ng-component"]],viewQuery:function(n,t){if(1&n&&i.Ec(v,1),2&n){let n;i.pc(n=i.dc())&&(t.eChart=n.first)}},decls:19,vars:5,consts:[[1,"running-apps","p-md"],[1,"memory-block","mb-lg"],[1,"title-block","flex-row","justify-between"],[1,"title","mb-md"],[3,"config"],["eChart",""],[1,"running-block","mb-lg"],["size","small","e-button","",3,"click",4,"ngIf"],["text","\u65e0\u6b63\u5728\u8fd0\u884c\u7684App",4,"ngIf"],["class","running-item flex-row align-center mb-md",4,"ngFor","ngForOf"],[4,"ngIf"],["size","small","e-button","",3,"click"],["text","\u65e0\u6b63\u5728\u8fd0\u884c\u7684App"],[1,"running-item","flex-row","align-center","mb-md"],["border","","size","small","shape","square",1,"mr-md",3,"src"],[1,"name"],["size","small","e-button","",1,"button",3,"click"],[1,"closed-block"],[1,"icon","mr-md",3,"src"],[1,"name-block"],[1,"id"]],template:function(n,t){1&n&&(i.Vb(0,"e-app"),i.Vb(1,"div",0),i.Vb(2,"div",1),i.Vb(3,"div",2),i.Vb(4,"b",3),i.Vb(5,"h2"),i.Ac(6,"\u8d44\u6e90\u5360\u7528\u60c5\u51b5"),i.Ub(),i.Ub(),i.Ub(),i.Qb(7,"e-chart",4,5),i.Ub(),i.Qb(9,"e-divider"),i.Vb(10,"div",6),i.Vb(11,"div",2),i.Vb(12,"b",3),i.Vb(13,"h2"),i.Ac(14,"\u6b63\u5728\u8fd0\u884c"),i.Ub(),i.Ub(),i.yc(15,A,2,0,"button",7),i.Ub(),i.yc(16,x,1,0,"e-empty",8),i.yc(17,V,6,2,"div",9),i.Ub(),i.yc(18,w,8,1,"ng-container",10),i.Ub(),i.Ub()),2&n&&(i.Cb(7),i.kc("config",t.memoryChart),i.Cb(8),i.kc("ngIf",t.runningApps.length),i.Cb(1),i.kc("ngIf",!t.runningApps.length),i.Cb(1),i.kc("ngForOf",t.runningApps),i.Cb(1),i.kc("ngIf",t.closedApps.length))},directives:[s.a,d,m.a,r.j,r.i,C.a,k.a,y.a],styles:[".running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px}.running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;margin-bottom:2.6666666667px}.running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{font-size:14px;opacity:.5}.running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-left:auto}"]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.Nb({type:n}),n.\u0275inj=i.Mb({imports:[[c.a]]}),n})()}}]);