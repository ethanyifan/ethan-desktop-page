(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"4jyl":function(t,n,e){"use strict";e.r(n),e.d(n,"HydrogenBrowserApp",function(){return C}),e.d(n,"HydrogenBrowserModule",function(){return w});var i=e("PCNd"),c=e("nd0x"),s=e("fXoL");let o=(()=>{class t{constructor(){this.homePage="https://cn.bing.com/",this.history=[]}setHistory(t){for(let n=0;n<this.history.length;n++);}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var r=e("YLzM"),a=e("aYRI"),l=e("D8zh"),d=e("ofXK"),b=e("7NfB"),h=e("3Pt+"),u=e("NDuo");const g=function(t){return{active:t}};function f(t,n){if(1&t){const t=s.Wb();s.Vb(0,"div",15),s.cc("mouseup",function(e){s.sc(t);const i=n.index;return s.ec(2).onTabMouseDown(e,i)}),s.Vb(1,"div",16),s.zc(2),s.Ub(),s.Vb(3,"i",17),s.cc("click",function(){s.sc(t);const e=n.index;return s.ec(2).closeTab(e)}),s.Ub(),s.Ub()}if(2&t){const t=n.$implicit,e=n.index,i=s.ec(2);s.kc("ngClass",s.mc(2,g,i.tabIndex==e)),s.Cb(2),s.Ac(t.title)}}const m=function(t){return{hide:t}};function p(t,n){if(1&t&&(s.Tb(0),s.Vb(1,"div",18),s.Qb(2,"iframe",19),s.fc(3,"safeUrl"),s.Ub(),s.Sb()),2&t){const t=n.$implicit,e=n.index,i=s.ec(2);s.Cb(1),s.kc("ngClass",s.mc(4,m,i.tabIndex!=e)),s.Cb(1),s.kc("src",s.gc(3,2,t.addressList[t.addressIndex]),s.tc)}}const k=function(t){return{disabled:t}};function x(t,n){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"div",2),s.Vb(2,"i",3),s.cc("click",function(){return s.sc(t),s.ec().back()}),s.Ub(),s.Vb(3,"i",4),s.cc("click",function(){return s.sc(t),s.ec().forward()}),s.Ub(),s.Vb(4,"i",5),s.cc("click",function(){return s.sc(t),s.ec().refresh()}),s.Ub(),s.Vb(5,"i",6),s.cc("click",function(){return s.sc(t),s.ec().home()}),s.Ub(),s.Vb(6,"div",7),s.Vb(7,"input",8),s.cc("ngModelChange",function(n){return s.sc(t),s.ec().addressInput=n})("keydown",function(n){return s.sc(t),s.ec().search(n)}),s.Ub(),s.Ub(),s.Vb(8,"i",9),s.cc("click",function(){return s.sc(t),s.ec().showHistory()}),s.Ub(),s.Vb(9,"i",10),s.cc("click",function(){return s.sc(t),s.ec().showFavorite()}),s.Ub(),s.Ub(),s.Vb(10,"div",11),s.xc(11,f,4,4,"div",12),s.Vb(12,"i",13),s.cc("click",function(){return s.sc(t),s.ec().addTab()}),s.Ub(),s.Ub(),s.xc(13,p,4,6,"ng-container",14),s.Sb()}if(2&t){const t=s.ec();s.Cb(2),s.kc("ngClass",s.mc(5,k,0==t.tabList[t.tabIndex].addressIndex)),s.Cb(1),s.kc("ngClass",s.mc(7,k,t.tabList[t.tabIndex].addressIndex==t.tabList[t.tabIndex].addressList.length-1)),s.Cb(4),s.kc("ngModel",t.addressInput),s.Cb(4),s.kc("ngForOf",t.tabList),s.Cb(2),s.kc("ngForOf",t.tabList)}}let C=(()=>{class t{constructor(t,n,e){this.HBAS=t,this.EAS=n,this.toastSrv=e,this.titleBarConfig={showBorder:!1},this.menu=[{name:"\u5bfc\u822a",children:[{name:"\u540e\u9000",click:()=>{this.back()}},{name:"\u524d\u8fdb",click:()=>{this.forward()}},{name:"\u5237\u65b0",click:()=>{this.refresh()}},{name:"\u4e3b\u9875",click:()=>{this.home()}}]},{name:"\u6807\u7b7e\u9875",children:[{name:"\u65b0\u5efa\u6807\u7b7e\u9875",click:()=>{this.addTab()}},{name:"\u5173\u95ed\u6240\u6709\u6807\u7b7e\u9875",click:()=>{}}]},{name:"\u4e66\u7b7e",children:[]},{name:"\u5386\u53f2\u8bb0\u5f55",children:[]},{name:"\u8bbe\u7f6e",children:[]}],this.maxTabCount=5,this.tabList=[],this.EAS.setAppActionBarMenu("hydrogenBrowser",this.menu)}ngOnInit(){}ngAfterViewInit(){this.EAS.eAppConfigChange.subscribe(t=>{var n;"hydrogenBrowser"==t.id&&this.addTab(null===(n=t.config)||void 0===n?void 0:n.src)})}onTabMouseDown(t,n){0==t.button?this.tabIndex=n:1==t.button&&this.closeTab(n)}addTab(t){this.tabList.length>=this.maxTabCount?this.toastSrv.info(`\u6700\u591a\u53ea\u80fd\u521b\u5efa${this.maxTabCount}\u4e2a\u6807\u7b7e\u9875\u54e6`):(this.tabList.push({title:"\u65b0\u6807\u7b7e\u9875",addressIndex:0,addressList:[t||this.HBAS.homePage]}),this.tabIndex=this.tabList.length-1)}closeTab(t){1==this.tabList.length&&this.addTab(),this.tabIndex=0==t?this.tabList.length-2:--t,this.tabList.splice(t,1)}search(t){const n=()=>{clearTimeout(this.ctrlKeyTimeout),this.ctrlKeyTimeout=null};if(t.ctrlKey&&(this.ctrlKey=!0,n(),this.ctrlKeyTimeout=setTimeout(()=>{n(),this.ctrlKey=!1},200)),13==t.keyCode){let t=this.addressInput;if(this.isUrl(t))return void this.to(t);t=this.ctrlKey?`//${t}.com`:`https://cn.bing.com/search?q=${t}`,this.to(t),this.addressInput=""}}isUrl(t){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(t)}back(){0!=this.tabList[this.tabIndex].addressIndex&&this.tabList[this.tabIndex].addressIndex--}forward(){this.tabList[this.tabIndex].addressIndex!=this.tabList[this.tabIndex].addressList.length-1&&this.tabList[this.tabIndex].addressIndex++}refresh(){}home(){this.to(this.HBAS.homePage)}to(t){this.tabList[this.tabIndex].addressList.push(""),this.tabList[this.tabIndex].addressIndex=this.tabList[this.tabIndex].addressList.length-1,Object(c.d)(()=>{this.tabList[this.tabIndex].addressList[this.tabList[this.tabIndex].addressList.length-1]=t},100)}showHistory(){}showFavorite(){}}return t.\u0275fac=function(n){return new(n||t)(s.Pb(o),s.Pb(r.a),s.Pb(a.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["ng-component"]],decls:2,vars:2,consts:[[3,"titleBarConfig"],[4,"ngIf"],[1,"util-block","flex-row","align-center","px-sm"],["size","medium","e-icon","","icon","arrow_back",1,"util-icon",3,"ngClass","click"],["size","medium","e-icon","","icon","arrow_forward",1,"util-icon",3,"ngClass","click"],["size","medium","e-icon","","icon","refresh",1,"util-icon",3,"click"],["size","medium","type","outlined","e-icon","","icon","home",1,"util-icon",3,"click"],[1,"address-block","flex-row","align-center","mx-sm"],["placeholder","\u8f93\u5165\u7f51\u5740\u6216\u7528\u4e8e\u641c\u7d22\u7684\u5173\u952e\u8bcd",1,"address-input","full-parent",3,"ngModel","ngModelChange","keydown"],["size","medium","e-icon","","icon","history",1,"util-icon",3,"click"],["size","medium","type","outlined","e-icon","","icon","grade",1,"util-icon",3,"click"],[1,"tab-block","flex-row","align-center"],["class","tab-item flex-row align-center",3,"ngClass","mouseup",4,"ngFor","ngForOf"],["size","small","e-icon","","icon","add_box","type","filled",1,"close-icon","pl-sm",3,"click"],[4,"ngFor","ngForOf"],[1,"tab-item","flex-row","align-center",3,"ngClass","mouseup"],[1,"title"],["size","small","e-icon","","icon","cancel","type","filled",1,"close-icon",3,"click"],[1,"iframe-content",3,"ngClass"],["frameborder","0","width","100%","height","100%","scrolling","auto","sandbox","allow-same-origin allow-scripts allow-forms",1,"iframe",3,"src"]],template:function(t,n){1&t&&(s.Vb(0,"e-app",0),s.xc(1,x,14,9,"ng-container",1),s.Ub()),2&t&&(s.kc("titleBarConfig",n.titleBarConfig),s.Cb(1),s.kc("ngIf",null==n.tabList?null:n.tabList.length))},directives:[l.a,d.j,b.a,d.h,h.a,h.g,h.j,d.i],pipes:[u.a],styles:[".util-block[_ngcontent-%COMP%]{height:38px}.util-block[_ngcontent-%COMP%]   .util-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;margin:0 2px;flex-shrink:0;transition:background-color .2s}.util-block[_ngcontent-%COMP%]   .util-icon[_ngcontent-%COMP%]:hover{background-color:#f7f7f7}.util-block[_ngcontent-%COMP%]   .util-icon[_ngcontent-%COMP%]:active{background-color:#ebebeb}.util-block[_ngcontent-%COMP%]   .util-icon.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.util-block[_ngcontent-%COMP%]   .address-block[_ngcontent-%COMP%]{width:100%;height:32px;border-radius:32px;background-color:#f7f7f7;padding:0 18px;transition:background-color .2s}.util-block[_ngcontent-%COMP%]   .address-block[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.tab-block[_ngcontent-%COMP%]{height:32px;border-bottom:1px solid #00000014}.tab-block[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{width:160px;height:32px;padding:0 4px;border-right:1px solid #00000014;background-color:#fff}.tab-block[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]{background-color:#0052cc;color:#fff}.tab-block[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;color:inherit;font-size:14px;height:32px;line-height:32px;padding:0 8px}.tab-block[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{opacity:0;flex-shrink:0;color:inherit;transform:translateY(2px);transition:transform .2s ease,opacity .2s ease}.tab-block[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]:hover   .close-icon[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.iframe-content[_ngcontent-%COMP%]{height:calc(100% - 38px - 32px)}.iframe-content.hide[_ngcontent-%COMP%]{display:none}.iframe-content[_ngcontent-%COMP%]   .iframe[_ngcontent-%COMP%]{height:100%}"]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({imports:[[i.a]]}),t})()}}]);