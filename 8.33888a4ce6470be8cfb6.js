(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"Ql+H":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingApp",function(){return Y}),n.d(e,"SettingModule",function(){return Z});var i=n("PCNd"),a=n("nd0x"),c=n("AytR"),l=n("fXoL"),o=n("HNPq"),r=n("aX2Z"),s=n("L7HW"),p=n("aYRI"),g=n("ofXK");const u=["inputFile"],f=["*"];let b=(()=>{class t{constructor(){this.change=new l.n}ngOnInit(){}clearValue(){this.inputFile.nativeElement.value=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Jb({type:t,selectors:[["e-uploader"]],viewQuery:function(t,e){if(1&t&&l.Cc(u,1),2&t){let t;l.pc(t=l.dc())&&(e.inputFile=t.first)}},inputs:{multiple:"multiple"},outputs:{change:"change"},ngContentSelectors:f,decls:4,vars:1,consts:[[1,"e-uploader"],["type","file",1,"file-input","full-parent",3,"multiple","click"],["inputFile",""]],template:function(t,e){1&t&&(l.jc(),l.Vb(0,"label",0),l.Vb(1,"input",1,2),l.cc("click",function(){return e.clearValue()}),l.Ub(),l.ic(3),l.Ub()),2&t&&(l.Cb(1),l.kc("multiple",null!=!!e.multiple))},styles:[".e-uploader[_ngcontent-%COMP%]{position:relative;display:inline-block}.e-uploader[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;cursor:default}"]}),t})();var d=n("AO/J");const m=["waterFall"];function h(t,e){1&t&&l.Rb(0)}const C=function(t){return{"margin-bottom":t}},w=function(t){return{$implicit:t}};function O(t,e){if(1&t&&(l.Vb(0,"div",5),l.xc(1,h,1,0,"ng-container",6),l.Ub()),2&t){const t=e.$implicit,n=l.ec(2);l.kc("ngStyle",l.mc(3,C,n.gap)),l.Cb(1),l.kc("ngTemplateOutlet",n.reference)("ngTemplateOutletContext",l.mc(5,w,t))}}function k(t,e){if(1&t&&(l.Vb(0,"div",3),l.xc(1,O,2,7,"div",4),l.Ub()),2&t){const t=e.$implicit;l.Cb(1),l.kc("ngForOf",t)}}const v=function(t){return{gap:t}};let x=(()=>{class t{constructor(){}ngOnInit(){}ngOnChanges(){this.refresh()}refresh(){if(this.columnCount){this.waterfallData=[];for(let t=0;t<this.columnCount;t++)this.waterfallData.push([]);this.pushItemToColumn(0)}}pushItemToColumn(t){Object(a.d)(()=>{const e=[...this.waterFall.nativeElement.children];let n=0,i=0;e.map((t,e)=>{const{height:a}=t.getBoundingClientRect();0==e?i=a:a<i&&(n=e,i=a)}),this.waterfallData[n].push(this.list[t]),t!=this.list.length-1&&this.pushItemToColumn(t+1)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Jb({type:t,selectors:[["e-waterfall"]],viewQuery:function(t,e){if(1&t&&l.Cc(m,1),2&t){let t;l.pc(t=l.dc())&&(e.waterFall=t.first)}},inputs:{list:"list",columnCount:"columnCount",reference:"reference",gap:"gap"},features:[l.Ab],decls:3,vars:4,consts:[[1,"e-waterfall","flex-row","align-start",3,"ngStyle"],["waterFall",""],["class","e-waterfall-column",4,"ngFor","ngForOf"],[1,"e-waterfall-column"],["class","e-waterfall-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"e-waterfall-item",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(l.Vb(0,"div",0,1),l.xc(2,k,2,1,"div",2),l.Ub()),2&t&&(l.kc("ngStyle",l.mc(2,v,e.gap)),l.Cb(2),l.kc("ngForOf",e.waterfallData))},directives:[g.k,g.i,g.n],styles:[".e-waterfall[_ngcontent-%COMP%]   .e-waterfall-column[_ngcontent-%COMP%]{flex:1}"]}),t})();var y=n("hlSF");const P=["waterFall"],M=["loadImgRef"];function S(t,e){if(1&t){const t=l.Wb();l.Vb(0,"img",9,10),l.cc("load",function(e){return l.sc(t),l.ec().onLoadImgComplete(e)})("error",function(e){return l.sc(t),l.ec().onLoadImgError(e)}),l.Ub()}if(2&t){const t=l.ec();l.kc("src",t.loadImg.url,l.uc)}}function _(t,e){if(1&t){const t=l.Wb();l.Vb(0,"div",11),l.cc("click",function(){l.sc(t);const n=e.$implicit,i=l.ec();return i.currentWallpaper==n.url?"":i.setWallpaper(n)}),l.Qb(1,"img",12),l.fc(2,"scaleImage"),l.Ub()}if(2&t){const t=e.$implicit,n=l.ec();l.kc("ngClass",n.currentWallpaper==t.url?"active":""),l.Cb(1),l.kc("src",l.gc(2,2,t.url),l.uc)}}const I=function(t){return{loading:t}};let j=(()=>{class t{constructor(t,e,n,i){this.wallpaperSrv=t,this.mockPostSrv=e,this.configSrv=n,this.toastSrv=i}ngOnInit(){this.getWallpaper()}getWallpaper(){this.mockPostSrv.post({url:this.configSrv.api.getWallpaper}).subscribe(t=>{200==t.status&&(c.a.production&&t.data.splice(0,1),this.wallpaperList=t.data,this.wallpaperSrv.getWallpaper().subscribe(t=>{this.currentWallpaper=t}))})}setWallpaper(t){this.loading=!0,this.loadImg=Object(a.c)(t)}onLoadImgComplete(){this.wallpaperSrv.setWallpaper(this.loadImg.url,Boolean(2==this.loadImg.type)),this.toastSrv.success("\u8bbe\u7f6e\u58c1\u7eb8\u6210\u529f",{content:2==this.loadImg.type?"\u672c\u5730\u4e0a\u4f20\u7684\u58c1\u7eb8\u5237\u65b0\u9875\u9762\u540e\u5c06\u4e22\u5931":""}),this.loadImg=null,this.loading=!1}onLoadImgError(t){this.loadImg=null,this.loading=!1,this.toastSrv.error("\u8bbe\u7f6e\u58c1\u7eb8\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc")}onFileSelect(t){[...t.target.files].map((t,e)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>{const t={id:Object(a.e)(),type:2,url:String(n.result)};this.wallpaperList.push(t),this.waterFall.refresh(),0==e&&this.setWallpaper(t)}})}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(o.a),l.Pb(r.a),l.Pb(s.a),l.Pb(p.a))},t.\u0275cmp=l.Jb({type:t,selectors:[["wallpaper-setting"]],viewQuery:function(t,e){if(1&t&&(l.Cc(P,1),l.Cc(M,1)),2&t){let t;l.pc(t=l.dc())&&(e.waterFall=t.first),l.pc(t=l.dc())&&(e.loadImgRef=t.first)}},decls:11,vars:7,consts:[[1,"wallpaper-setting","full-parent",3,"ngClass"],[1,"wallpaper-setting-wrapper","full-parent-scroll","px-md","py-lg"],["class","load-image",3,"src","load","error",4,"ngIf"],[3,"change"],["e-button",""],[1,"wallpaper-select","mt-md"],["gap","16px",3,"list","columnCount","reference"],["waterFall",""],["reference",""],[1,"load-image",3,"src","load","error"],["loadImgRef",""],[1,"wallpaper-item",3,"ngClass","click"],[1,"bg",3,"src"]],template:function(t,e){if(1&t&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.xc(2,S,2,1,"img",2),l.Vb(3,"e-uploader",3),l.cc("change",function(t){return e.onFileSelect(t)}),l.Vb(4,"button",4),l.zc(5,"\u9009\u62e9\u672c\u5730\u58c1\u7eb8"),l.Ub(),l.Ub(),l.Vb(6,"div",5),l.Vb(7,"e-waterfall",6,7),l.xc(9,_,3,4,"ng-template",null,8,l.yc),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&t){const t=l.qc(10);l.kc("ngClass",l.mc(5,I,e.loading)),l.Cb(2),l.kc("ngIf",e.loadImg),l.Cb(5),l.kc("list",e.wallpaperList)("columnCount",2)("reference",t)}},directives:[g.h,g.j,b,d.a,x],pipes:[y.a],styles:['@charset "UTF-8";.wallpaper-setting[_ngcontent-%COMP%]{position:relative}.wallpaper-setting[_ngcontent-%COMP%]:before{content:"\u8bbe\u7f6e\u58c1\u7eb8\u4e2d...";font-size:18px;font-weight:700;position:fixed;left:50%;top:50%;z-index:1;opacity:0;pointer-events:none;transform:translate(-50%,-50%);transition:opacity .3s ease}.wallpaper-setting.loading[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]{opacity:.1;pointer-events:none}.wallpaper-setting.loading[_ngcontent-%COMP%]:before{opacity:1}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]{background-color:#2f2f2f;transition:opacity .3s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]{position:relative}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{width:100%;border-radius:2px;border:8px solid #fff;transition:transform .2s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:hover   .bg[_ngcontent-%COMP%]{transform:scale(1.02)}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:active   .bg[_ngcontent-%COMP%]{transform:scale(.98)}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item.active[_ngcontent-%COMP%]:before{content:"\u5f53\u524d\u58c1\u7eb8";position:absolute;left:16px;bottom:16px;background-color:#0052cc;border-radius:2px;color:#fff;z-index:1;padding:4px;font-size:12px}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .load-image[_ngcontent-%COMP%]{width:1px;height:1px;visibility:hidden;position:absolute;z-index:-1;pointer-events:none;left:0}']}),t})();var A=n("R0Ic");const B={opacity:0,transform:"translateX(100%)"},F="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",U={slideAnim:Object(A.m)("slideAnim",[Object(A.l)(":enter",[Object(A.k)(B),Object(A.e)(F,Object(A.k)({opacity:1,transform:"translateX(0)"}))]),Object(A.l)(":leave",[Object(A.e)(F,Object(A.k)(B))])]),backStageAnim:Object(A.m)("backStageAnim",[Object(A.j)("default",Object(A.k)({})),Object(A.j)("backStage",Object(A.k)({transform:"scale(0.95)"})),Object(A.l)("default <=> backStage",[Object(A.e)("0.4s cubic-bezier(0.4, 0.0, 0.2, 1)")])])};var V=n("YLzM"),z=n("EWJI"),W=n("CFL1"),L=n("D8zh"),Q=n("Pt4E");const R={opacity:0},T="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",J={fadeAnim:Object(A.m)("fadeAnim",[Object(A.l)(":enter",[Object(A.k)(R),Object(A.e)(T,Object(A.k)({opacity:1}))]),Object(A.l)(":leave",[Object(A.e)(T,Object(A.k)(R))])])};function E(t,e){if(1&t&&l.Qb(0,"div",1),2&t){const t=l.ec();l.kc("@fadeAnim",void 0)("ngStyle",t.shadeStyle)}}let $=(()=>{class t{constructor(){}get shadeStyle(){return{"z-index":Object(a.k)(this.zIndex)?this.zIndex:"unset","background-color":`rgba(0,0,0,${Object(a.k)(this.opacity)?this.opacity:"0.6"})`}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Jb({type:t,selectors:[["e-shade"]],inputs:{show:"show",zIndex:"zIndex",opacity:"opacity"},decls:1,vars:1,consts:[["class","e-shade full-parent",3,"ngStyle",4,"ngIf"],[1,"e-shade","full-parent",3,"ngStyle"]],template:function(t,e){1&t&&l.xc(0,E,1,2,"div",0),2&t&&l.kc("ngIf",e.show)},directives:[g.j,g.k],styles:[".e-shade[_ngcontent-%COMP%] {\n      position:absolute;\n      left:0;\n      top:0;\n      pointer-events:none;\n    }"],data:{animation:[J.fadeAnim]}}),t})();var K=n("7NfB");const D=["eApp"];function X(t,e){if(1&t){const t=l.Wb();l.Vb(0,"div",11),l.cc("click",function(){l.sc(t);const n=e.$implicit;return l.ec().onSettingClick(n)}),l.Qb(1,"i",12),l.Vb(2,"div",13),l.zc(3),l.Ub(),l.Ub()}if(2&t){const t=e.$implicit;l.Cb(1),l.kc("icon",t.icon),l.Cb(2),l.Ac(t.name)}}function N(t,e){1&t&&l.Qb(0,"wallpaper-setting")}function H(t,e){if(1&t&&(l.Vb(0,"div",14),l.xc(1,N,1,0,"wallpaper-setting",15),l.Ub()),2&t){const t=l.ec();l.kc("@slideAnim",void 0)("ngSwitch",t.activeSettingKey),l.Cb(1),l.kc("ngSwitchCase","wallpaper")}}const q=function(t){return{value:t}};let Y=(()=>{class t{constructor(t,e,n){this.EAS=t,this.SS=e,this.userSrv=n,this.menu=[{name:"\u8bbe\u7f6e",items:[{name:"\u9996\u9875\u8bbe\u7f6e"},{name:"\u968f\u4fbf\u8bbe\u7f6e"}]}],this.settings=[{key:"user",name:"\u7528\u6237\u7ba1\u7406",icon:"account_circle"},{key:"time",name:"\u65f6\u95f4\u8bbe\u7f6e",icon:"schedule"},{key:"wallpaper",name:"\u684c\u9762\u58c1\u7eb8",icon:"image"}],this.titleBarConfig={showBack:!1,showBorder:!1,backClick:()=>this.onBackClick()},this.EAS.setAppActionBarMenu("setting",this.menu)}ngOnInit(){}onSettingClick(t){this.activeSettingKey=t.key,this.titleBarConfig.showBack=!0,"wallpaper"==t.key&&(this.titleBarConfig.background="#444444",this.titleBarConfig.showBorder=!1,this.titleBarConfig.color="white"),this.eApp.refreshTitleBarConfig()}onBackClick(){this.activeSettingKey=null,this.titleBarConfig.showBack=!1,this.titleBarConfig.background="white",this.titleBarConfig.showBorder=!0,delete this.titleBarConfig.color,this.eApp.refreshTitleBarConfig()}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(V.a),l.Pb(z.a),l.Pb(W.a))},t.\u0275cmp=l.Jb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&l.Cc(D,1),2&t){let t;l.pc(t=l.dc())&&(e.eApp=t.first)}},decls:14,vars:10,consts:[[3,"titleBarConfig","titleBarConfigChange"],["eApp",""],[1,"setting","full-parent"],[1,"user-block","flex-column","align-center","justify-center","pt-md","mb-md"],["size","large","shape","circle",1,"mb-md",3,"src"],[1,"user-name"],[1,"user-account"],[1,"setting-block","p-md"],["class","setting-item flex-row align-center px-lg py-md mb-md",3,"click",4,"ngFor","ngForOf"],["opacity","0.5",3,"show"],["class","setting-panel full-parent",3,"ngSwitch",4,"ngIf"],[1,"setting-item","flex-row","align-center","px-lg","py-md","mb-md",3,"click"],["e-icon","","type","filled","size","medium",1,"icon","mr-md",3,"icon"],[1,"name"],[1,"setting-panel","full-parent",3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(l.Vb(0,"e-app",0,1),l.cc("titleBarConfigChange",function(t){return e.titleBarConfig=t}),l.Vb(2,"div",2),l.Vb(3,"div",3),l.Qb(4,"e-image",4),l.Vb(5,"b",5),l.Vb(6,"h3"),l.zc(7),l.Ub(),l.Ub(),l.Vb(8,"div",6),l.zc(9),l.Ub(),l.Ub(),l.Vb(10,"div",7),l.xc(11,X,4,2,"div",8),l.Ub(),l.Ub(),l.Qb(12,"e-shade",9),l.xc(13,H,2,3,"div",10),l.Ub()),2&t&&(l.kc("titleBarConfig",e.titleBarConfig),l.Cb(2),l.kc("@backStageAnim",l.mc(8,q,e.activeSettingKey?"backStage":"default")),l.Cb(2),l.kc("src",e.userSrv.userInfo.header),l.Cb(3),l.Ac(e.userSrv.userInfo.name),l.Cb(2),l.Ac(e.userSrv.userInfo.account),l.Cb(2),l.kc("ngForOf",e.settings),l.Cb(1),l.kc("show",!!e.activeSettingKey),l.Cb(1),l.kc("ngIf",e.activeSettingKey))},directives:function(){return[L.a,Q.a,g.i,$,g.j,K.a,g.l,g.m,j]},styles:[".user-block[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin-bottom:4px}.user-block[_ngcontent-%COMP%]   .user-account[_ngcontent-%COMP%]{opacity:.6}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #00000014;box-shadow:0 0 2px -2px #0000001a,0 2px 4px 0 #0000000f;background-color:#fff;transition:box-shadow .2s ease,background-color .2s ease}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#42526e}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px -2px #0000001f,0 2px 8px 0 #00000014}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:active{background-color:#f9f9f9;box-shadow:none}.setting-panel[_ngcontent-%COMP%]{position:absolute;left:0;top:0;background-color:#fff;box-shadow:-6px 0 16px -8px #00000014,-9px 0 28px 0 #0000000d,-12px 0 48px 16px #00000008}"],data:{animation:[U.slideAnim,U.backStageAnim]}}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({imports:[[i.a]]}),t})()}}]);