(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"Ql+H":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingApp",function(){return N}),n.d(e,"SettingModule",function(){return Y});var i=n("b3xY"),a=n("PCNd"),c=n("nd0x"),l=n("AytR"),o=n("fXoL"),s=n("HNPq"),r=n("aX2Z"),p=n("L7HW"),g=n("aYRI"),u=n("ofXK");const f=["inputFile"],b=["*"];let d=(()=>{class t{constructor(){this.change=new o.n}ngOnInit(){}clearValue(){this.inputFile.nativeElement.value=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["e-uploader"]],viewQuery:function(t,e){if(1&t&&o.Cc(f,1),2&t){let t;o.pc(t=o.dc())&&(e.inputFile=t.first)}},inputs:{multiple:"multiple"},outputs:{change:"change"},ngContentSelectors:b,decls:4,vars:1,consts:[[1,"e-uploader"],["type","file",1,"file-input","full-parent",3,"multiple","click"],["inputFile",""]],template:function(t,e){1&t&&(o.jc(),o.Vb(0,"label",0),o.Vb(1,"input",1,2),o.cc("click",function(){return e.clearValue()}),o.Ub(),o.ic(3),o.Ub()),2&t&&(o.Cb(1),o.kc("multiple",null!=!!e.multiple))},styles:[".e-uploader[_ngcontent-%COMP%]{position:relative;display:inline-block}.e-uploader[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;cursor:default}"]}),t})();var m=n("AO/J");const h=["waterFall"];function w(t,e){1&t&&o.Rb(0)}const C=function(t){return{"margin-bottom":t}},O=function(t){return{$implicit:t}};function k(t,e){if(1&t&&(o.Vb(0,"div",5),o.xc(1,w,1,0,"ng-container",6),o.Ub()),2&t){const t=e.$implicit,n=o.ec(2);o.kc("ngStyle",o.mc(3,C,n.gap)),o.Cb(1),o.kc("ngTemplateOutlet",n.reference)("ngTemplateOutletContext",o.mc(5,O,t))}}function v(t,e){if(1&t&&(o.Vb(0,"div",3),o.xc(1,k,2,7,"div",4),o.Ub()),2&t){const t=e.$implicit;o.Cb(1),o.kc("ngForOf",t)}}const y=function(t){return{gap:t}};let x=(()=>{class t{constructor(){}ngOnInit(){}ngOnChanges(){this.refresh()}refresh(){if(this.columnCount){this.waterfallData=[];for(let t=0;t<this.columnCount;t++)this.waterfallData.push([]);this.pushItemToColumn(0)}}pushItemToColumn(t){Object(c.d)(()=>{const e=[...this.waterFall.nativeElement.children];let n=0,i=0;e.map((t,e)=>{const{height:a}=t.getBoundingClientRect();0==e?i=a:a<i&&(n=e,i=a)}),this.waterfallData[n].push(this.list[t]),t!=this.list.length-1&&this.pushItemToColumn(t+1)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["e-waterfall"]],viewQuery:function(t,e){if(1&t&&o.Cc(h,1),2&t){let t;o.pc(t=o.dc())&&(e.waterFall=t.first)}},inputs:{list:"list",columnCount:"columnCount",reference:"reference",gap:"gap"},features:[o.Ab],decls:3,vars:4,consts:[[1,"e-waterfall","flex-row","align-start",3,"ngStyle"],["waterFall",""],["class","e-waterfall-column",4,"ngFor","ngForOf"],[1,"e-waterfall-column"],["class","e-waterfall-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"e-waterfall-item",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(o.Vb(0,"div",0,1),o.xc(2,v,2,1,"div",2),o.Ub()),2&t&&(o.kc("ngStyle",o.mc(2,y,e.gap)),o.Cb(2),o.kc("ngForOf",e.waterfallData))},directives:[u.k,u.i,u.n],styles:[".e-waterfall[_ngcontent-%COMP%]   .e-waterfall-column[_ngcontent-%COMP%]{flex:1}"]}),t})();var S=n("hlSF");const P=["waterFall"],M=["loadImgRef"];function j(t,e){if(1&t){const t=o.Wb();o.Vb(0,"img",9,10),o.cc("load",function(e){return o.sc(t),o.ec().onLoadImgComplete(e)}),o.Ub()}if(2&t){const t=o.ec();o.kc("src",t.loadImg.url,o.uc)}}function _(t,e){if(1&t){const t=o.Wb();o.Vb(0,"div",11),o.cc("click",function(){o.sc(t);const n=e.$implicit;return o.ec().setWallpaper(n)}),o.Qb(1,"img",12),o.fc(2,"scaleImage"),o.Ub()}if(2&t){const t=e.$implicit;o.Cb(1),o.kc("src",o.gc(2,1,t.url),o.uc)}}const I=function(t){return{loading:t}};let A=(()=>{class t{constructor(t,e,n,i){this.wallpaperSrv=t,this.mockPostSrv=e,this.configSrv=n,this.toastSrv=i}ngOnInit(){this.getWallpaper()}getWallpaper(){this.mockPostSrv.post({url:this.configSrv.api.getWallpaper}).subscribe(t=>{200==t.status&&(l.a.production&&t.data.splice(0,1),this.wallpaperList=t.data)})}setWallpaper(t){this.loading=!0,this.loadImg=Object(c.c)(t)}onLoadImgComplete(){this.wallpaperSrv.setWallpaper(this.loadImg.url,Boolean(2==this.loadImg.type)),this.toastSrv.success("\u8bbe\u7f6e\u58c1\u7eb8\u6210\u529f",{content:2==this.loadImg.type?"\u672c\u5730\u4e0a\u4f20\u7684\u58c1\u7eb8\u5237\u65b0\u9875\u9762\u540e\u5c06\u4e22\u5931":""}),this.loadImg=null,this.loading=!1}onFileSelect(t){[...t.target.files].map((t,e)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>{const t={id:Object(c.e)(),type:2,url:String(n.result)};this.wallpaperList.push(t),this.waterFall.refresh(),0==e&&this.setWallpaper(t)}})}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(s.a),o.Pb(r.a),o.Pb(p.a),o.Pb(g.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["wallpaper-setting"]],viewQuery:function(t,e){if(1&t&&(o.Cc(P,1),o.Cc(M,1)),2&t){let t;o.pc(t=o.dc())&&(e.waterFall=t.first),o.pc(t=o.dc())&&(e.loadImgRef=t.first)}},decls:11,vars:7,consts:[[1,"wallpaper-setting","full-parent",3,"ngClass"],[1,"wallpaper-setting-wrapper","full-parent-scroll","px-md","py-lg"],["class","load-image",3,"src","load",4,"ngIf"],[3,"change"],["e-button",""],[1,"wallpaper-select","mt-md"],["gap","16px",3,"list","columnCount","reference"],["waterFall",""],["reference",""],[1,"load-image",3,"src","load"],["loadImgRef",""],[1,"wallpaper-item",3,"click"],[1,"bg",3,"src"]],template:function(t,e){if(1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.xc(2,j,2,1,"img",2),o.Vb(3,"e-uploader",3),o.cc("change",function(t){return e.onFileSelect(t)}),o.Vb(4,"button",4),o.zc(5,"\u9009\u62e9\u672c\u5730\u58c1\u7eb8"),o.Ub(),o.Ub(),o.Vb(6,"div",5),o.Vb(7,"e-waterfall",6,7),o.xc(9,_,3,3,"ng-template",null,8,o.yc),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t){const t=o.qc(10);o.kc("ngClass",o.mc(5,I,e.loading)),o.Cb(2),o.kc("ngIf",e.loadImg),o.Cb(5),o.kc("list",e.wallpaperList)("columnCount",2)("reference",t)}},directives:[u.h,u.j,d,m.a,x],pipes:[S.a],styles:['@charset "UTF-8";.wallpaper-setting[_ngcontent-%COMP%]{position:relative}.wallpaper-setting[_ngcontent-%COMP%]:before{content:"\u8bbe\u7f6e\u58c1\u7eb8\u4e2d...";font-size:18px;font-weight:700;position:fixed;left:50%;top:50%;z-index:1;opacity:0;pointer-events:none;transform:translate(-50%,-50%);transition:opacity .3s ease}.wallpaper-setting.loading[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]{opacity:.1;pointer-events:none}.wallpaper-setting.loading[_ngcontent-%COMP%]:before{opacity:1}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]{background-color:#2f2f2f;transition:opacity .3s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{width:100%;border-radius:2px;border:8px solid #fff;transition:transform .2s ease}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:hover   .bg[_ngcontent-%COMP%]{transform:scale(1.02)}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .wallpaper-select[_ngcontent-%COMP%]   .wallpaper-item[_ngcontent-%COMP%]:active   .bg[_ngcontent-%COMP%]{transform:scale(.98)}.wallpaper-setting[_ngcontent-%COMP%]   .wallpaper-setting-wrapper[_ngcontent-%COMP%]   .load-image[_ngcontent-%COMP%]{width:1px;height:1px;visibility:hidden;position:absolute;z-index:-1;pointer-events:none;left:0}']}),t})();var B=n("R0Ic");const F={opacity:0,transform:"translateX(100%)"},U="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",V={slideAnim:Object(B.m)("slideAnim",[Object(B.j)("void",Object(B.k)(F)),Object(B.l)(":enter",[Object(B.e)(U,Object(B.k)({opacity:1,transform:"translateX(0)"}))]),Object(B.l)(":leave",[Object(B.e)(U,Object(B.k)(F))])]),backStageAnim:Object(B.m)("backStageAnim",[Object(B.j)("default",Object(B.k)({})),Object(B.j)("backStage",Object(B.k)({transform:"scale(0.95)"})),Object(B.l)("default <=> backStage",[Object(B.e)("0.4s cubic-bezier(0.4, 0.0, 0.2, 1)")])])};var z=n("YLzM"),W=n("EWJI"),Q=n("D8zh");const R={opacity:0},T="0.4s cubic-bezier(0.4, 0.0, 0.2, 1)",J={fadeAnim:Object(B.m)("fadeAnim",[Object(B.j)("void",Object(B.k)(R)),Object(B.l)(":enter",[Object(B.e)(T,Object(B.k)({opacity:1}))]),Object(B.l)(":leave",[Object(B.e)(T,Object(B.k)(R))])])};function L(t,e){if(1&t&&o.Qb(0,"div",1),2&t){const t=o.ec();o.kc("@fadeAnim",void 0)("ngStyle",t.shadeStyle)}}let $=(()=>{class t{constructor(){}get shadeStyle(){return{"z-index":Object(c.k)(this.zIndex)?this.zIndex:"unset","background-color":`rgba(0,0,0,${Object(c.k)(this.opacity)?this.opacity:"0.6"})`}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["e-shade"]],inputs:{show:"show",zIndex:"zIndex",opacity:"opacity"},decls:1,vars:1,consts:[["class","e-shade full-parent",3,"ngStyle",4,"ngIf"],[1,"e-shade","full-parent",3,"ngStyle"]],template:function(t,e){1&t&&o.xc(0,L,1,2,"div",0),2&t&&o.kc("ngIf",e.show)},directives:[u.j,u.k],styles:[".e-shade[_ngcontent-%COMP%] {\n      position:absolute;\n      left:0;\n      top:0;\n      pointer-events:none;\n    }"],data:{animation:[J.fadeAnim]}}),t})();const K=["eApp"];function D(t,e){if(1&t){const t=o.Wb();o.Vb(0,"div",6),o.cc("click",function(){o.sc(t);const n=e.$implicit;return o.ec().onSettingClick(n)}),o.Vb(1,"div",7),o.zc(2),o.Ub(),o.Ub()}if(2&t){const t=e.$implicit;o.Cb(2),o.Ac(t.name)}}function E(t,e){1&t&&o.Qb(0,"wallpaper-setting")}function X(t,e){if(1&t&&(o.Vb(0,"div",8),o.Qb(1,"div",9),o.xc(2,E,1,0,"wallpaper-setting",10),o.Ub()),2&t){const t=o.ec();o.kc("@slideAnim",void 0)("ngSwitch",t.activeSettingKey),o.Cb(2),o.kc("ngSwitchCase","wallpaper")}}const H=function(t){return{value:t}};let N=(()=>{class t{constructor(t,e){this.EAS=t,this.SS=e,this.menu=[{name:"\u8bbe\u7f6e",items:[{name:"\u9996\u9875\u8bbe\u7f6e"},{name:"\u968f\u4fbf\u8bbe\u7f6e"}]}],this.settings=[{key:"user",name:"\u7528\u6237\u7ba1\u7406"},{key:"wallpaper",name:"\u684c\u9762\u58c1\u7eb8"}],this.titleBarConfig={showBack:!1,backClick:()=>this.onBackClick()},this.EAS.setAppActionBarMenu("setting",this.menu)}ngOnInit(){}onSettingClick(t){this.activeSettingKey=t.key,this.titleBarConfig.showBack=!0,"wallpaper"==t.key&&(this.titleBarConfig.background="#444444",this.titleBarConfig.showBorder=!1,this.titleBarConfig.color="white"),this.eApp.refreshTitleBarConfig()}onBackClick(){this.activeSettingKey=null,this.titleBarConfig.showBack=!1,this.titleBarConfig.background="white",this.titleBarConfig.showBorder=!0,delete this.titleBarConfig.color,this.eApp.refreshTitleBarConfig()}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(z.a),o.Pb(W.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&o.Cc(K,1),2&t){let t;o.pc(t=o.dc())&&(e.eApp=t.first)}},decls:6,vars:7,consts:[[3,"titleBarConfig","titleBarConfigChange"],["eApp",""],[1,"setting-block","p-md","full-parent"],["class","setting-item px-lg py-md mb-md",3,"click",4,"ngFor","ngForOf"],["opacity","0.2",3,"show"],["class","setting-panel full-parent",3,"ngSwitch",4,"ngIf"],[1,"setting-item","px-lg","py-md","mb-md",3,"click"],[1,"name"],[1,"setting-panel","full-parent",3,"ngSwitch"],[1,"setting-panel-util","flex-row"],[4,"ngSwitchCase"]],template:function(t,e){1&t&&(o.Vb(0,"e-app",0,1),o.cc("titleBarConfigChange",function(t){return e.titleBarConfig=t}),o.Vb(2,"div",2),o.xc(3,D,3,1,"div",3),o.Ub(),o.Qb(4,"e-shade",4),o.xc(5,X,3,3,"div",5),o.Ub()),2&t&&(o.kc("titleBarConfig",e.titleBarConfig),o.Cb(2),o.kc("@backStageAnim",o.mc(5,H,e.activeSettingKey?"backStage":"default")),o.Cb(1),o.kc("ngForOf",e.settings),o.Cb(1),o.kc("show",!!e.activeSettingKey),o.Cb(1),o.kc("ngIf",e.activeSettingKey))},directives:function(){return[Q.a,u.i,$,u.j,u.l,u.m,A]},styles:[".setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #00000014;box-shadow:0 0 2px -2px #0000001a,0 2px 4px 0 #0000000f;background-color:#fff;transition:box-shadow .2s ease,background-color .2s ease}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px -2px #0000001f,0 2px 8px 0 #00000014}.setting-block[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:active{background-color:#f9f9f9;box-shadow:none}.setting-panel[_ngcontent-%COMP%]{position:absolute;left:0;top:0;background-color:#fff;box-shadow:-6px 0 16px -8px #00000014,-9px 0 28px 0 #0000000d,-12px 0 48px 16px #00000008}"],data:{animation:[V.slideAnim,V.backStageAnim]}}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({imports:[[a.a,i.a]]}),t})()}}]);