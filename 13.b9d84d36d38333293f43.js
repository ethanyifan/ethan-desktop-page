(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{eafY:function(t,o,e){"use strict";e.r(o),e.d(o,"ToDoApp",function(){return C}),e.d(o,"ToDoModule",function(){return M});var n=e("PCNd"),i=e("nd0x"),c=e("lJxs"),s=e("quSY"),d=e("fXoL"),r=e("YLzM"),a=e("5nFA"),l=e("4n3s"),b=e("D8zh"),g=e("ofXK"),m=e("7NfB"),f=e("6oNp");function p(t,o){if(1&t&&(d.Vb(0,"div",9),d.Qb(1,"i",10),d.Vb(2,"div",11),d.Vb(3,"div",12),d.zc(4),d.Ub(),d.Vb(5,"div",13),d.zc(6),d.fc(7,"dateFixer"),d.Ub(),d.Ub(),d.Ub()),2&t){const t=o.$implicit;d.Cb(1),d.kc("icon","default"==t.status?"circle":"check_circle"),d.Cb(3),d.Ac(t.title),d.Cb(2),d.Ac(d.hc(7,3,t.date,"HH:mm"))}}function u(t,o){if(1&t&&(d.Vb(0,"div",6),d.Vb(1,"div",7),d.Vb(2,"b"),d.zc(3),d.fc(4,"dateFixer"),d.Ub(),d.Ub(),d.xc(5,p,8,6,"div",8),d.Ub()),2&t){const t=o.$implicit;d.Cb(3),d.Ac(d.hc(4,2,t.date,"yyyy/MM/dd")),d.Cb(2),d.kc("ngForOf",t.items)}}function h(t,o){if(1&t){const t=d.Wb();d.Vb(0,"div",2),d.Vb(1,"h2",3),d.Vb(2,"b"),d.zc(3,"\u5f85\u529e\u4e8b\u9879"),d.Ub(),d.Vb(4,"i",4),d.cc("click",function(){return d.sc(t),d.ec().editToDo()}),d.Ub(),d.Ub(),d.xc(5,u,6,5,"div",5),d.Ub()}if(2&t){const t=d.ec();d.Cb(5),d.kc("ngForOf",t.toDoListArray)}}let C=(()=>{class t{constructor(t,o,e){this.EAS=t,this.todoSrv=o,this.EMS=e,this.menu=[{name:"\u5f85\u529e\u4e8b\u9879",children:[]}],this.titleBarConfig={showTitle:!1,showBorder:!1},this.subscription=new s.a,this.editing=!1,this.EAS.setAppActionBarMenu("toDo",this.menu)}ngOnInit(){this.getToDoList()}ngAfterViewInit(){Object(i.d)(()=>{this.subscription.add(this.EAS.eAppConfigChange.subscribe(t=>{var o;"toDo"==t.id&&(null===(o=t.config)||void 0===o?void 0:o.event)&&Object(i.d)(()=>{var o;switch(t.config.event){case"add":this.editToDo(null===(o=t.config)||void 0===o?void 0:o.data)}})}))},1500)}ngOnDestroy(){this.subscription.unsubscribe()}getToDoList(){this.todoSrv.getToDoList().subscribe(t=>{this.setToDoListArray(t.data)})}setToDoListArray(t){let o=[];for(let e in t){let n=t[e];o.push({date:new Date(Number(e)),items:n})}this.toDoListArray=o}editToDo(t){console.log(t),this.editing||(this.editing=!0,this.EMS.ef({title:((null==t?void 0:t.id)?"\u7f16\u8f91":"\u65b0\u589e")+"\u5f85\u529e\u4e8b\u9879",efConfig:{formData:t||{},schema:{title:{title:"\u4e3b\u9898",widget:"input",placeholder:"\u8bf7\u8f93\u5165\u4e3b\u9898",validator:t=>Object(i.o)(t)?[]:["\u8bf7\u8f93\u5165\u4e3b\u9898"]},date:{title:"\u65f6\u95f4",widget:"date",placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",dateFormat:"yyyy/MM/dd HH:mm"}}},submitAction:o=>(o.timestamp=String(new Date(Object(i.f)(o.date,"yyyy/MM/dd HH:mm:ss")).getTime()),delete o.date,(null==t?void 0:t.id)?this.todoSrv.updateToDo(o).pipe(Object(c.a)(t=>("SUCCESS"==t.result&&this.setToDoListArray(t.data),t.result))):this.todoSrv.addToDo(o).pipe(Object(c.a)(t=>("SUCCESS"==t.result&&this.setToDoListArray(t.data),t.result)))),onClose:()=>{this.editing=!1}}))}}return t.\u0275fac=function(o){return new(o||t)(d.Pb(r.a),d.Pb(a.a),d.Pb(l.a))},t.\u0275cmp=d.Jb({type:t,selectors:[["ng-component"]],decls:2,vars:2,consts:[[3,"titleBarConfig"],["class","to-do full-parent-scroll p-md",4,"ngIf"],[1,"to-do","full-parent-scroll","p-md"],[1,"main-title","mb-lg","flex-row","justify-between"],["e-icon","","icon","add_circle","size","medium",3,"click"],["class","to-do-group",4,"ngFor","ngForOf"],[1,"to-do-group"],[1,"group-title","mt-lg","mb-md","pl-sm"],["class","to-do-item flex-row align-center mb-sm px-sm py-md",4,"ngFor","ngForOf"],[1,"to-do-item","flex-row","align-center","mb-sm","px-sm","py-md"],["e-icon","","size","small","type","outlined",1,"check-icon","mr-sm",3,"icon"],[1,"detail"],[1,"title"],[1,"date"]],template:function(t,o){1&t&&(d.Vb(0,"e-app",0),d.xc(1,h,6,1,"div",1),d.Ub()),2&t&&(d.kc("titleBarConfig",o.titleBarConfig),d.Cb(1),d.kc("ngIf",o.toDoListArray))},directives:[b.a,g.j,m.a,g.i],pipes:[f.a],styles:[".to-do[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .to-do[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2064d8}.to-do[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .2s,filter .2s}.to-do[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{filter:brightness(130%)}.to-do[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:active{transform:scale(.9)}.to-do[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]{border:1px solid #eaeaea;border-radius:4px;background-color:#fff;transition:box-shadow .4s ease}.to-do[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px -2px #0000001f,0 2px 8px 0 #00000014}.to-do[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]:active{box-shadow:none}.to-do[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:2.6666666667px}.to-do[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#a5adba}"]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=d.Nb({type:t}),t.\u0275inj=d.Mb({imports:[[n.a]]}),t})()}}]);